"use strict";const e=require("../../common/vendor.js"),a=require("../../utils/business.js"),s={__name:"sudokuClimp",setup(s){const o=e.ref(!1),l=e.ref(""),r=e.ref(!1),u=e.ref([]),t=e.ref(0),c=e.ref(0),n=e.ref(1),i=e.index.createCanvasContext("sudokuSource"),v=e.ref([{src:"../../static/images/border-vertical-flower.png"},{src:"../../static/images/border-vertical-golden.png"},{src:"../../static/images/border-horizontal-bird.png"},{src:"../../static/images/border-horizontal-cloud.png"}]),f=e.ref(null),d=e.ref([]),g=e.ref([]);for(let e=0;e<9;e++)u.value.push(e);function p(a){o.value=!0;const{screenWidth:s}=e.index.getWindowInfo();c.value=s,t.value=parseInt(c.value/n.value),i.drawImage(f.value,0,0,c.value,t.value),l.value&&(i.globalCompositeOperation="source-over",i.drawImage(l.value,0,0,c.value,t.value)),i.draw(!1,(()=>{const s=parseInt(c.value/3),l=parseInt(t.value/3);console.log("offsetPxRow:",s),console.log("offsetPxCol:",l),g.value=[],!a&&(d.value=[]);for(let r=0;r<3;r++)for(let u=0;u<3;u++)e.index.canvasToTempFilePath({canvasId:"sudokuSource",x:u*s,y:r*l,width:s,height:l,success(e){const{tempFilePath:s}=e;!a&&d.value.push(s),g.value.push(s),o.value=!1},fail(e){console.log("err:",e),o.value=!1,2==r&&2==u&&p(a)}})}))}const h=()=>{e.index.chooseImage({count:1,sizeType:["original","compressed"],success:function(a){r.value=!0,e.index.getImageInfo({src:a.tempFilePaths[0],success(e){const{width:s,height:o}=e;n.value=(s/o).toFixed(2),f.value=a.tempFilePaths[0],l.value=null,p()}})}})},m=()=>{a.saveImage2Photo("canvas",g.value)};return(a,s)=>({a:t.value+"px",b:l.value,c:e.f(d.value,((e,a,s)=>({a:e,b:e}))),d:e.f(v.value,((a,s,o)=>({a:a.src,b:e.o((()=>{(e=>{if(!g.value.length)return!1;l.value=e,p(!0)})(a.src)}),a.src),c:a.src}))),e:e.o(m),f:!r.value,g:e.o(h)})}};wx.createPage(s);
