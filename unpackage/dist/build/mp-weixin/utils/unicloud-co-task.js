"use strict";const s=require("../common/vendor.js");class c{constructor({success:s,fail:c,complete:t}={}){this.status=0,this.callback={success:s,fail:c,complete:t}}invoke(s,...c){if(0!==this.status)return;const t=this.callback[s];t&&t(...c)}abort(){this.status=1}}exports.main=function({coName:t,funName:e,param:a,success:o,fail:i,complete:r,config:n}={}){if(!Array.isArray(a))throw new Error("param的值必须为数组");const l=new c({success:o,fail:i,complete:r});return s.Bs.importObject(t,n||{})[e](...a).then((s=>{l.invoke("success",s)})).catch((s=>{l.invoke("fail",s)})).finally((s=>{l.invoke("complete",s)})),l};
